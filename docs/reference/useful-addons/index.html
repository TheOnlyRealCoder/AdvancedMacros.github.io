<!DOCTYPE HTML><html lang=en-US><head><meta charset=UTF-8><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#404040><meta name=apple-mobile-web-app-title content="Advanced Macros"><meta name=application-name content="Advanced Macros"><meta name=msapplication-TileColor content=#404040><meta name=msapplication-TileImage content=/mstile-144x144.png><meta name=theme-color content=#404040><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/assets/css/main.css><link rel=stylesheet href=/assets/css/hl.css><script async src=/assets/js/main.js></script><title>Useful Addons | Advanced Macros</title><meta itemprop=description name=description content="**Tip:** Load functions in a script with the startup event to have them ready for all your scripts.<h2 id=" with-luaja..."><meta property=og:locale content=en><meta property=og:type content=website><meta property=article:published_time content=2020-04-11T20:06:41+00:00><meta property=og:title content="Useful Addons | Advanced Macros"><meta property=og:url content="https://advancedmacros.github.io/docs/reference/useful-addons/"><meta property=og:site_name content="Advanced Macros"><meta property=article:author content="Advanced Macros"><meta property=og:description content="**Tip:** Load functions in a script with the startup event to have them ready for all your scripts.<h2 id=" with-luaja..."><meta itemprop=keywords><meta name=twitter:card content=summary><meta name=twitter:title content="Useful Addons | Advanced Macros"><meta name=twitter:description content="**Tip:** Load functions in a script with the startup event to have them ready for all your scripts.<h2 id=" with-luaja..."><link rel=alternate type=application/atom+xml title="Advanced Macros" href=https://advancedmacros.github.io/feed.xml><link rel=canonical href="https://advancedmacros.github.io/docs/reference/useful-addons/"></head><body class=wrap><header><div class=flexbox><div class=center-on-mobiles><h1><a href="/" class=logo><img height=65 srcset="/assets/logo/128.png 128w, /assets/logo/504.png 504w, /assets/logo/751.png 751w, /assets/logo/996.png 996w, /assets/logo/1218.png 1218w, /assets/logo/1425.png 1425w, /assets/logo/1613.png 1613w, /assets/logo/1786.png 1786w, /assets/logo/2160.png 2160w" style="max-height: 47px;" src=/assets/logo/504.png alt=Logo> <span style="vertical-align: top;">Advanced Macros</span></a></h1></div><nav class="main-nav hide-on-mobiles"><ul><li><a href="/">Home</a></li><li class=current><a href="/docs/">Docs</a></li><li><a href="/resources/">Resources</a></li><li><a href="/news/">News</a></li></ul></nav><div class="search hide-on-mobiles"></div><div class="meta hide-on-mobiles"><ul><li><a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/releases/tag/v9.0.2>v9.0.2</a></li><li><a href=https://github.com/AdvancedMacros>GitHub</a></li></ul></div></div><nav class="mobile-nav show-on-mobiles"><ul><li><a href="/">Home</a></li><li class=current><a href="/docs/">Docs</a></li><li><a href="/resources/">Resources</a></li><li><a href="/news/">News</a></li><li><a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io>GitHub</a></li></ul></nav></header><section class=docs><div class=grid><div class="docs-nav-mobile unit whole show-on-mobiles"><select onchange="if (this.value) window.location.href=this.value"><option>Navigate the docs…</option><optgroup label="Getting Started"><option value="/docs/">Docs</option><option value="/docs/step-by-step/01-setup/">Step by Step Tutorial</option></optgroup><optgroup label=Guides><option value="/docs/installation/">Installation</option><option value="/docs/quickstart/">Quickstart</option><option value="/docs/support/">Support</option><option value="/docs/troubleshooting/">Troubleshooting</option></optgroup><optgroup label=Reference><option value="/docs/reference/events/">Events</option><option value="/docs/reference/functions/">Functions</option><option value="/docs/reference/hud2d/">HUD2d</option><option value="/docs/reference/hud3d/">HUD3d</option><option value="/docs/reference/useful-addons/">Useful Addons</option></optgroup><optgroup label=Tutorials><option value="/tutorials/inventory/">Automating the inventory</option><option value="/tutorials/blah/">This is a tutorial</option><option value="/tutorials/blah-2/">This is another tutorial</option></optgroup></select></div><div class="unit four-fifths"><article><div class="improve right hide-on-mobiles"><a data-proofer-ignore href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/edit/source/_docs/reference/useful-addons.md><img src=https://advancedmacros.github.io/assets/feather/edit-2.svg alt="Edit icon"> <span>&nbsp;Improve this page</span></a></div><h1>Useful Addons</h1><div class=note>**Tip:** Load functions in a script with the <code>startup</code> event to have them ready for all your scripts.</div><h2 id=with-luajava>With LuaJava <a href=#with-luajava></a> <a href=#with-luajava></a></h2><h3 id=real-regex>Real Regex <a href=#real-regex></a> <a href=#real-regex></a></h3><p>For when lua’s patterns just arn’t enough.</p><h4 id=the-code>The Code <a href=#the-code></a> <a href=#the-code></a></h4><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>Pattern</span> <span class=o>=</span> <span class=n>luajava</span><span class=p>.</span><span class=n>bindClass</span><span class=s2>"java.util.regex.Pattern"</span>

<span class=k>function</span> <span class=nc>string</span><span class=p>.</span><span class=nf>regex</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=n>pat</span><span class=p>)</span>
  <span class=n>log</span><span class=p>(</span><span class=s2>"&amp;6"</span><span class=o>..</span><span class=n>str</span><span class=o>..</span><span class=s2>" &amp;d"</span><span class=o>..</span><span class=n>pat</span><span class=p>)</span>
  <span class=kd>local</span> <span class=n>p</span> <span class=o>=</span> <span class=n>Pattern</span><span class=p>:</span><span class=n>compile</span><span class=p>(</span><span class=n>pat</span><span class=p>)</span>
  <span class=kd>local</span> <span class=n>m</span> <span class=o>=</span> <span class=n>p</span><span class=p>:</span><span class=n>matcher</span><span class=p>(</span><span class=n>str</span><span class=p>)</span>
  
  <span class=k>return</span> <span class=k>function</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>m</span><span class=p>:</span><span class=n>find</span><span class=p>()</span> <span class=k>then</span>
      <span class=k>if</span> <span class=n>m</span><span class=p>:</span><span class=n>groupCount</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>then</span>
        <span class=kd>local</span> <span class=n>out</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>m</span><span class=p>:</span><span class=n>groupCount</span><span class=p>()</span> <span class=k>do</span>
          <span class=n>out</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>m</span><span class=p>:</span><span class=n>group</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
        <span class=k>end</span>
        <span class=k>return</span> <span class=nb>table.unpack</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
      <span class=k>else</span>
        <span class=k>return</span> <span class=n>m</span><span class=p>:</span><span class=n>group</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
      <span class=k>end</span>
    <span class=k>end</span>
  <span class=k>end</span>
<span class=k>end</span>
</code></pre></div></div><h4 id=setup>Setup <a href=#setup></a> <a href=#setup></a></h4><p>To setup this function you only need to run a script containing the above code once.</p><h4 id=examples>Examples <a href=#examples></a> <a href=#examples></a></h4><h5 id=ex-1>Ex 1 <a href=#ex-1></a> <a href=#ex-1></a></h5><p>When no capture groups are used <code class=highlighter-rouge>a</code> will contain a string that matches the pattern. This example caputures one word at a time. <code class=highlighter-rouge>b</code> and <code class=highlighter-rouge>c</code> will both be <code class=highlighter-rouge>nil</code></p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>for</span> <span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>,</span><span class=n>c</span> <span class=k>in</span> <span class=p>(</span><span class=s2>"hello world\nand all who inhabit\nit"</span><span class=p>):</span><span class=n>regex</span><span class=s2>"[^\\W\\n]+"</span> <span class=k>do</span>
  <span class=n>log</span><span class=p>{</span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>,</span><span class=n>c</span><span class=p>}</span>
<span class=k>end</span>
</code></pre></div></div><h6 id=ex-2>Ex 2 <a href=#ex-2></a> <a href=#ex-2></a></h6><p>When capture groups are used, each letter will contain the string from a capture group This example caputures two words at a time. <code class=highlighter-rouge>c</code> will be <code class=highlighter-rouge>nil</code> and <code class=highlighter-rouge>b</code> will be <code class=highlighter-rouge>nil</code> on the last itteration because there are an odd number of words.</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>for</span> <span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>,</span><span class=n>c</span>  <span class=k>in</span> <span class=p>(</span><span class=s2>"hello world\nand all who inhabit\nit"</span><span class=p>):</span><span class=n>regex</span><span class=s2>"([^\\W\\n]+)[\\W\\n]*([^\\W\\n]+)?"</span> <span class=k>do</span>
  <span class=n>log</span><span class=p>{</span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>,</span><span class=n>c</span><span class=p>}</span>
<span class=k>end</span>
</code></pre></div></div><div class=note><a href="https://regexr.com/" target=_blank>regexr.com</a> is an easy way to test expressions. Don't forget to escape any <code>\</code> after pasting into your code!</div><h3 id=utf8>UTF8 <a href=#utf8></a> <a href=#utf8></a></h3><h4 id=the-code-1>The code <a href=#the-code-1></a> <a href=#the-code-1></a></h4><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>String</span> <span class=o>=</span> <span class=n>luajava</span><span class=p>.</span><span class=n>bindClass</span><span class=s2>"java.lang.String"</span>
<span class=kd>local</span> <span class=n>Char</span>   <span class=o>=</span> <span class=n>luajava</span><span class=p>.</span><span class=n>bindClass</span><span class=s2>"java.lang.Character"</span>
<span class=n>utf8</span> <span class=o>=</span> <span class=n>utf8</span> <span class=ow>or</span> <span class=p>{}</span>

<span class=k>function</span> <span class=nc>utf8</span><span class=p>.</span><span class=nf>char</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
  <span class=kd>local</span> <span class=n>args</span> <span class=o>=</span> <span class=p>{</span><span class=o>...</span><span class=p>}</span>
  <span class=kd>local</span> <span class=n>out</span> <span class=o>=</span> <span class=p>{}</span>
  <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>c</span> <span class=k>in</span> <span class=nb>ipairs</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=k>do</span>
    <span class=n>out</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>luajava</span><span class=p>.</span><span class=n>new</span><span class=p>(</span><span class=n>String</span><span class=p>,</span> <span class=n>Char</span><span class=p>:</span><span class=n>toChars</span><span class=p>(</span><span class=n>c</span><span class=p>))</span>
  <span class=k>end</span>
  <span class=k>return</span> <span class=nb>table.unpack</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=k>end</span>
</code></pre></div></div><h4 id=setup-1>Setup <a href=#setup-1></a> <a href=#setup-1></a></h4><p>To setup this function you only need to run a script containing the above code once.</p><h4 id=examples-1>Examples <a href=#examples-1></a> <a href=#examples-1></a></h4><h5 id=ex-1-1>Ex 1 <a href=#ex-1-1></a> <a href=#ex-1-1></a></h5><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=n>log</span><span class=p>(</span><span class=s2>"Hello world: &amp;a"</span><span class=o>..</span><span class=n>utf8</span><span class=p>.</span><span class=n>char</span><span class=p>(</span><span class=mi>10004</span><span class=p>))</span>
</code></pre></div></div><h4 id=result>Result <a href=#result></a> <a href=#result></a></h4><p><img src=https://cdn.discordapp.com/attachments/477916341706293278/661431589456183297/unknown.png alt="Hello world green checkmark" title=Result></p></article></div><div class="unit one-fifth hide-on-mobiles"><aside><h4>Getting Started</h4><ul><li><a href="/docs/">Docs</a></li><li><a href="/docs/step-by-step/01-setup/">Step by Step Tutorial</a></li></ul><h4>Guides</h4><ul><li><a href="/docs/installation/">Installation</a></li><li><a href="/docs/quickstart/">Quickstart</a></li><li><a href="/docs/support/">Support</a></li><li><a href="/docs/troubleshooting/">Troubleshooting</a></li></ul><h4>Reference</h4><ul><li><a href="/docs/reference/events/">Events</a></li><li><a href="/docs/reference/functions/">Functions</a></li><li><a href="/docs/reference/hud2d/">HUD2d</a></li><li><a href="/docs/reference/hud3d/">HUD3d</a></li><li class=current><a href="/docs/reference/useful-addons/">Useful Addons</a></li></ul><h4>Tutorials</h4><ul><li><a href="/tutorials/inventory/">Automating the inventory</a></li><li><a href="/tutorials/blah/">This is a tutorial</a></li><li><a href="/tutorials/blah-2/">This is another tutorial</a></li></ul><h4>Contents</h4><ul><li><a href=#with-luajava>With LuaJava</a><ul><li><a href=#real-regex>Real Regex</a></li><li><a href=#utf8>UTF8</a></li></ul></li></ul></aside></div><div class=clear></div></div></section><footer><div class=grid><div class="unit two-thirds center-on-mobiles"><p>The source for Advanced Macros is avalable <a href=https://github.com/AdvancedMacros>on GitHub</a>.</p></div><div class="unit one-third align-right center-on-mobiles"><p>The contents of this website are<br>&copy;&nbsp;2020 under the terms of the <a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/blob/source/LICENSE>MIT&nbsp;License</a>.</p></div></div></footer></body></html>